{% extends "layout.html" %}

{% block content %}
  <div id="map"></div>
  <script src="{{ url_for('static', filename='js/universal.js') }}"/></script>
  <script>

    var info = L.control();

    <!--plot marker on center of the city-->
    {% for marker in markers %}
      var markerCenter = L.marker([{{ marker['lat'] }}, {{ marker['lon'] }}]).addTo(map)
      markerCenter.bindPopup("{{ marker['popup'] }}").openPopup();
    {% endfor %}

    <!--bus stops using df from stops gtfs format-->
    {% for bus_stop_all in bus_stops_all_markers %}
      var markerBusStops = L.marker([{{ bus_stop_all['stop_lat'] }}, {{ bus_stop_all['stop_lon'] }}]).addTo(map)
      markerBusStops.bindPopup("{{ bus_stop_all['stop_name'].split(",")[1:] }}").openPopup();

      <!--return coordinates of marker when clicked-->
      markerBusStops.on('click', function (e) {
      var markerlatlng = e.target.getLatLng();
      console.log(markerlatlng);

      var markerlatlng_html = this.getPopup().getContent();

      if (document.getElementById("marker-info") != null){
        document.getElementById("marker-info").innerHTML = markerlatlng;
      }

      if (document.getElementById("test") != null){
        document.getElementById("test").innerHTML = markerlatlng_html;
      }

      console.log(markerlatlng_html)

      });


    {% endfor %}

  </script>

  <html>
    <div class="component">
      <div class="box">
        <h3 id="marker-info"></h3>
      </div>

      <div class="box">
        <h3 id="test"></h3>
        Box 2
      </div>

      <div class="box">
        Box 3
      </div>

      <div class="box">
        Box 4
      </div>

      <div class="box">
        Box 5
      </div>
    </div>
  </html>

{% endblock content %}






